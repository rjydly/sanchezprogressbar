<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SÃ¡nchez Progress Bar | LIVE</title>
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;700;900&family=JetBrains+Mono:wght@700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* MODO OSCURO */
            --bg-gradient: radial-gradient(circle at top right, #1a1a1c 0%, #050505 100%);
            --card-bg: #000000; 
            --card-border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-secondary: #888888;
            --fill-color: #ff3b30;
        }

        .light-mode {
            /* MODO CLARO */
            --bg-gradient: radial-gradient(circle at top right, #fdfbfb 0%, #ebedee 100%);
            --card-bg: #ffffff; 
            --card-border: rgba(0, 0, 0, 0.05);
            --text-main: #1d1d1f;
            --text-secondary: #6e6e73;
            --fill-color: #e30613;
        }

        * { transition: background 0.4s ease, color 0.4s ease; box-sizing: border-box; }

        body {
            background: var(--bg-gradient);
            color: var(--text-main);
            font-family: 'Lexend', sans-serif;
            display: flex;
            flex-direction: column; /* Cambiado para permitir contenido debajo */
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 80px 20px 40px 20px;
        }

        /* CONTROLES SUPERIORES */
        .controls {
            position: absolute;
            top: 25px;
            right: 25px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }

        .btn-control {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            color: var(--text-main);
            font-weight: 700;
            font-size: 0.7rem;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        select.btn-control {
            appearance: none;
            padding-right: 30px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: calc(100% - 12px) center;
        }

        .light-mode select.btn-control {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='black' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
        }

        /* TARJETA PRINCIPAL */
        .main-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            padding: 40px 30px;
            border-radius: 45px;
            box-shadow: 0 40px 100px rgba(0,0,0,0.15);
            width: 100%;
            max-width: 600px;
            text-align: center;
            z-index: 10;
        }

        .live-label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 700;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--fill-color);
            margin-bottom: 15px;
        }

        .pulse-dot {
            width: 8px; height: 8px; background: var(--fill-color);
            border-radius: 50%; animation: pulse-animation 1.5s infinite;
        }

        @keyframes pulse-animation {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.6); opacity: 0.3; }
            100% { transform: scale(1); opacity: 1; }
        }

        .header-msg {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin: 0 0 25px 0;
            line-height: 1.4;
        }

        /* SILUETA */
        .silhouette-box {
            position: relative; width: 100%; height: 480px; margin-bottom: 25px;
            overflow: hidden; display: flex; justify-content: center;
            align-items: center; background: var(--card-bg);
        }

        #liquid-fill {
            position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            background-color: var(--fill-color); width: 100%; height: 100%;
            z-index: 1; transition: height 3.5s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .silhouette-img { position: relative; z-index: 2; height: 100%; width: auto; pointer-events: none; }

        /* CONTADOR */
        .percent-display {
            font-family: 'JetBrains Mono', monospace;
            font-size: 3rem; font-weight: 800; letter-spacing: -2px;
            line-height: 1; white-space: nowrap;
        }

        /* SECCIÃ“N SEO / INFO */
        .seo-section {
            width: 100%;
            max-width: 550px;
            margin-top: 40px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
            padding: 0 20px;
        }

        .seo-section h2 {
            color: var(--text-main);
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        @media (max-width: 500px) {
            .percent-display { font-size: 1.6rem; }
            .silhouette-box { height: 350px; }
            .controls { top: 10px; right: 10px; flex-direction: column; }
            body { padding-top: 120px; }
        }

        .footer-text {
            margin-top: 30px; font-size: 0.65rem; font-weight: 700;
            letter-spacing: 1px; text-transform: uppercase;
            color: var(--text-secondary); opacity: 0.4;
        }
    </style>
</head>
<body>

    <div class="controls">
        <select class="btn-control" id="lang-select" onchange="changeLanguage(this.value)">
            <option value="es">ESPAÃ‘OL</option>
            <option value="en">ENGLISH</option>
            <option value="fr">FRANÃ‡AIS</option>
            <option value="de">DEUTSCH</option>
        </select>

        <button class="btn-control" onclick="toggleTheme()">
            <span id="theme-icon">ðŸŒ™</span>
            <span id="theme-text">MODO OSCURO</span>
        </button>
    </div>

    <div class="main-card">
        <div class="live-label">
            <div class="pulse-dot"></div> <span id="lbl-live">EN DIRECTO</span>
        </div>

        <p class="header-msg">
            <span id="lbl-title-pre">Pedro SÃ¡nchez ha completado el</span> <br>
            <b style="color: var(--text-main)"><span id="header-pct">0.00</span>%</b> 
            <span id="lbl-title-post">de su mandato</span>
        </p>

        <div class="silhouette-box">
            <div id="liquid-fill"></div>
            <img id="sanchez-img" src="sanchez_dark.png" class="silhouette-img">
        </div>

        <div class="percent-display" id="percent-display">00.000000000%</div>

        <div class="footer-text" id="lbl-footer">
            Legislatura EspaÃ±ola | 2023 â€” 2027
        </div>
    </div>

    <!-- SECCIÃ“N SEO -->
    <div class="seo-section">
        <h2 id="seo-title">XV Legislatura de EspaÃ±a</h2>
        <p id="seo-content">
            Esta herramienta realiza un seguimiento en tiempo real del mandato de Pedro SÃ¡nchez. 
            La XV Legislatura comenzÃ³ tras su investidura el 16 de noviembre de 2023 y se prevÃ© 
            que finalice en noviembre de 2027.
        </p>
    </div>

    <script>
        // TRADUCCIONES AMPLIADAS CON SEO
        const i18n = {
            es: { 
                live: "EN DIRECTO", titlePre: "Pedro SÃ¡nchez ha completado el", titlePost: "de su mandato", footer: "Legislatura EspaÃ±ola | 2023 â€” 2027", dark: "MODO OSCURO", light: "MODO CLARO",
                seoTitle: "XV Legislatura de EspaÃ±a",
                seoContent: "Esta herramienta realiza un seguimiento en tiempo real del progreso del mandato de Pedro SÃ¡nchez. La XV Legislatura espaÃ±ola comenzÃ³ tras la investidura el 16 de noviembre de 2023 y, de acuerdo con los plazos constitucionales, se estima su duraciÃ³n hasta noviembre de 2027."
            },
            en: { 
                live: "LIVE", titlePre: "Pedro SÃ¡nchez has completed", titlePost: "of his term", footer: "Spanish Legislature | 2023 â€” 2027", dark: "DARK MODE", light: "LIGHT MODE",
                seoTitle: "Spain's 15th Legislature",
                seoContent: "This tool provides a real-time tracking of Pedro SÃ¡nchez's term in office. The 15th Spanish Legislature began after his inauguration on November 16, 2023, and is expected to last until November 2027, following constitutional timelines."
            },
            fr: { 
                live: "EN DIRECT", titlePre: "Pedro SÃ¡nchez a complÃ©tÃ©", titlePost: "de son mandat", footer: "LÃ©gislature Espagnole | 2023 â€” 2027", dark: "MODE SOMBRE", light: "MODE CLAIR",
                seoTitle: "XVe LÃ©gislature de l'Espagne",
                seoContent: "Cet outil permet de suivre en temps rÃ©el la progression du mandat de Pedro SÃ¡nchez. La XVe lÃ©gislature espagnole a dÃ©butÃ© aprÃ¨s son investiture le 16 novembre 2023 et devrait se terminer en novembre 2027, conformÃ©ment au calendrier constitutionnel."
            },
            de: { 
                live: "LIVE", titlePre: "Pedro SÃ¡nchez hat", titlePost: "seiner Amtszeit abgeschlossen", footer: "Spanische Legislaturperiode | 2023 â€” 2027", dark: "DUNKLER MODUS", light: "HELLER MODUS",
                seoTitle: "15. Legislaturperiode Spaniens",
                seoContent: "Dieses Tool bietet eine Echtzeit-Verfolgung der Amtszeit von Pedro SÃ¡nchez. Die 15. spanische Legislaturperiode begann nach seiner Vereidigung am 16. November 2023 und wird voraussichtlich bis November 2027 dauern, basierend auf den verfassungsrechtlichen Fristen."
            }
        };

        // CALIBRACIÃ“N
        const IMG_H = 1536, MARGIN = 316;
        const PIES_PCT = (MARGIN / IMG_H) * 100;
        const CABEZA_PCT = ((IMG_H - MARGIN) / IMG_H) * 100;
        const BODY_RANGE = CABEZA_PCT - PIES_PCT;

        // TIEMPOS
        const START = new Date('2023-11-16T00:00:00').getTime();
        const END = new Date('2027-11-16T00:00:00').getTime();
        const TOTAL = END - START;

        const body = document.body;
        const liquid = document.getElementById('liquid-fill');
        const img = document.getElementById('sanchez-img');
        const displayTxt = document.getElementById('percent-display');
        const headTxt = document.getElementById('header-pct');

        function changeLanguage(lang) {
            const t = i18n[lang];
            document.getElementById('lbl-live').innerText = t.live;
            document.getElementById('lbl-title-pre').innerText = t.titlePre;
            document.getElementById('lbl-title-post').innerText = t.titlePost;
            document.getElementById('lbl-footer').innerText = t.footer;
            document.getElementById('seo-title').innerText = t.seoTitle;
            document.getElementById('seo-content').innerText = t.seoContent;
            
            const isLight = body.classList.contains('light-mode');
            document.getElementById('theme-text').innerText = isLight ? t.light : t.dark;
            localStorage.setItem('sanchez-lang', lang);
            
            // TambiÃ©n actualizamos el tÃ­tulo de la pÃ¡gina
            document.title = `SÃ¡nchez Progress Bar | ${t.live}`;
        }

        function toggleTheme() {
            body.classList.toggle('light-mode');
            const isLight = body.classList.contains('light-mode');
            const lang = document.getElementById('lang-select').value;
            document.getElementById('theme-icon').innerText = isLight ? 'â˜€ï¸' : 'ðŸŒ™';
            document.getElementById('theme-text').innerText = isLight ? i18n[lang].light : i18n[lang].dark;
            img.src = isLight ? 'sanchez_light.png' : 'sanchez_dark.png';
            localStorage.setItem('sanchez-theme', isLight ? 'light' : 'dark');
        }

        function getProgress() {
            const now = new Date().getTime();
            const elapsed = now - START;
            return Math.min(Math.max((elapsed / TOTAL) * 100, 0), 100);
        }

        function updateUI() {
            const p = getProgress();
            const queda = 100 - p;
            displayTxt.innerText = p.toFixed(9) + "%";
            headTxt.innerText = p.toFixed(2);
            liquid.style.width = (img.clientWidth - 3) + "px";
            if (liquid.style.transition === "none") {
                const vHeight = PIES_PCT + ( (queda / 100) * BODY_RANGE );
                liquid.style.height = vHeight + '%';
            }
        }

        window.onload = () => {
            // DETECCIÃ“N DE IDIOMA - AHORA PREDETERMINADO ESPAÃ‘OL
            const browserLang = navigator.language.split('-')[0];
            const supportedLangs = ['es', 'en', 'fr', 'de'];
            
            // Si el idioma del navegador estÃ¡ soportado, lo usamos; si no, 'es' por defecto.
            const defaultDetected = supportedLangs.includes(browserLang) ? browserLang : 'es';
            
            const langToSet = localStorage.getItem('sanchez-lang') || defaultDetected;
            
            document.getElementById('lang-select').value = langToSet;
            changeLanguage(langToSet);

            if(localStorage.getItem('sanchez-theme') === 'light') toggleTheme();

            setInterval(updateUI, 50);
            
            const pInicial = getProgress();
            const targetHeight = PIES_PCT + ( ((100 - pInicial) / 100) * BODY_RANGE );
            
            setTimeout(() => {
                liquid.style.height = targetHeight + '%';
                setTimeout(() => { liquid.style.transition = "none"; }, 3500);
            }, 300);
        };

        window.onresize = updateUI;
    </script>
</body>
</html>